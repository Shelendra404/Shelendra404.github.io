(this["webpackJsonpreact-example-app"]=this["webpackJsonpreact-example-app"]||[]).push([[0],{13:function(e,t,a){"use strict";a.r(t);a(7),a(8),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(1);var o=a(0),r=a.n(o),l=function(e){var t=e.bookCollection;return r.a.createElement("div",{className:"flex flex-col sm:flex-row text-2xl font-medium mb-2"},r.a.createElement("span",null,"Tuloksia yhteens\xe4: ",t.resultCount),r.a.createElement("span",{className:"sm:ml-8"},"N\xe4ytet\xe4\xe4n: ",t.books.length))},c=function(e){var t=e.book,a=e.className;return r.a.createElement("div",{className:["flex","p-6",a].filter((function(e){return void 0!==e})).join(" ")},r.a.createElement("span",{className:"flex-1 font-medium"},t.title),r.a.createElement("span",{className:"flex-1 mx-4 font-normal"},t.author),r.a.createElement("span",{className:"flex-1 font-normal ml-5"},t.year))};function i(e){return e%2===0?"bg-gray-100":"bg-gray-200"}var s=function(e){var t=e.bookCollection;switch(t.type){case"NotAsked":return r.a.createElement("div",null,"Voit hakea kirjoja yll\xe4olevasta hakupaneelista.");case"Loading":return r.a.createElement("div",null,"Ladataan kirjoja...");case"Failure":return r.a.createElement("div",null,"Hups! Haku ep\xe4onnistui.");case"Success":return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,{bookCollection:t.value}),r.a.createElement("div",{className:"flex flex-col"},t.value.books.map((function(e,t){return r.a.createElement(c,{key:"".concat(e.title).concat(e.year).concat(e.author),book:e,className:i(t)})}))));default:!function(e){throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(t)}},u=function(e){var t=e.bookTitle,a=e.onBookTitleChange,n=e.onSearchSubmit,o=e.searching;return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("h2",{className:"text-3xl"},"Hae kirjoja"),r.a.createElement("div",{className:"font-light text-sm"},"Kirjan tai tekij\xe4n nimi"),r.a.createElement("form",{className:"flex flex-row max-w-sm",onSubmit:function(e){e.preventDefault(),n()}},r.a.createElement("input",{className:"flex-1 py-2 px-2 leading-tight text-lg focus:outline-none bg-gray-100 text-black",type:"text",value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement("button",{className:"text-white font-bold px-8 py-2 bg-gray-700 hover:bg-gray-800 ml-2 focus:outline-none disabled:opacity-50",type:"submit",disabled:o},"Hae")))},m=function(e){var t,a=e.bookSearcher,o=r.a.useState({type:"NotAsked"}),l=Object(n.a)(o,2),c=l[0],i=l[1],m=r.a.useState(""),f=Object(n.a)(m,2),p=f[0],d=f[1],h=r.a.useState(void 0),b=Object(n.a)(h,2),v=b[0],k=b[1];return r.a.useEffect((function(){void 0!==v&&(i({type:"Loading"}),a.findBooks(v).then((function(e){i({type:"Success",value:e})})).catch((function(e){i(function(e){return{type:"Failure",error:e}}(e))})))}),[v,a]),r.a.createElement("div",{className:"flex flex-col px-4 py-4"},r.a.createElement(u,{bookTitle:p,onBookTitleChange:d,onSearchSubmit:function(){return k({title:p})},searching:(t=c,"Loading"===t.type)}),r.a.createElement("hr",{className:"my-5"}),r.a.createElement(s,{bookCollection:c}))},f=a(3),p=a(4);function d(e){return{title:e.title,year:e.year,author:e.primaryAuthors}}var h=new(function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,[{key:"findBooks",value:function(e){var t=e.title,a=[["lookfor",'title:"'.concat(encodeURIComponent(t),'" OR author:"').concat(encodeURIComponent(t),'"')],["type","AllFields"],["field[]","title"],["field[]","primaryAuthors"],["field[]","cleanIsbn"],["field[]","name"],["field[]","year"],["sort","relevance,id asc"],["page","".concat(1)],["limit","20"],["prettyPrint","faslse"],["lng","fi"]].map((function(e){var t=Object(n.a)(e,2),a=t[0],o=t[1];return"".concat(a,"=").concat(o)})).join("&");return fetch("https://api.finna.fi/api/v1/search?".concat(a),{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return{resultCount:e.resultCount,books:0===e.resultCount?[]:e.records.map(d),page:1}}))}}]),e}()),b=function(){return r.a.createElement(m,{bookSearcher:h})},v=a(5);a.n(v).a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,a){e.exports=a(13)},7:function(e,t,a){},8:function(e,t,a){}},[[6,1,2]]]);
//# sourceMappingURL=main.5e83cff6.chunk.js.map